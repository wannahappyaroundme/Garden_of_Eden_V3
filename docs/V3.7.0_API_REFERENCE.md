# Garden of Eden V3.7.0 - API Reference

Complete reference for all v3.7.0 Tauri commands.

---

## GraphRAG Commands (14 commands)

### 1. `graphrag_extract_entities`

Extract entities and relationships from text.

**Parameters:**
- `text: string` - The text to analyze

**Returns:**
```json
{
  "entities": [
    {
      "name": "string",
      "entity_type": "Person" | "Organization" | "Location" | "Technology" | "Concept" | "Tool" | "Project" | "Document" | "Event",
      "properties": {}
    }
  ],
  "relationships": [
    {
      "source_entity": "string",
      "target_entity": "string",
      "relationship_type": "WorksWith" | "PartOf" | "Uses" | "Creates" | "Knows" | "LocatedAt" | "DependsOn" | "RelatesTo",
      "weight": 1.0
    }
  ]
}
```

**Example:**
```typescript
const result = await invoke('graphrag_extract_entities', {
  text: 'John works at Microsoft building Azure services.'
});
```

---

### 2. `graphrag_build_graph`

Build knowledge graph from text.

**Parameters:**
- `text: string` - The text to process

**Returns:**
```json
{
  "total_entities": number,
  "total_relationships": number,
  "total_communities": number
}
```

**Example:**
```typescript
await invoke('graphrag_build_graph', {
  text: 'Long document content...'
});
```

---

### 3. `graphrag_save_graph`

Save the current knowledge graph to disk.

**Parameters:** None

**Returns:** `"Graph saved successfully"`

**Example:**
```typescript
await invoke('graphrag_save_graph');
```

---

### 4. `graphrag_load_entity`

Load a specific entity by ID.

**Parameters:**
- `entity_id: string` - The entity identifier

**Returns:**
```json
{
  "entity_id": "string",
  "name": "string",
  "entity_type": "string",
  "properties": {},
  "community_id": number | null,
  "degree": number
}
```

**Example:**
```typescript
const entity = await invoke('graphrag_load_entity', {
  entityId: 'person_john_doe'
});
```

---

### 5. `graphrag_search_entities`

Search for entities by name or type.

**Parameters:**
- `query: string` - Search query
- `limit: number` - Maximum results (default: 10)

**Returns:**
```json
{
  "entities": [/* GraphNode objects */]
}
```

**Example:**
```typescript
const results = await invoke('graphrag_search_entities', {
  query: 'Microsoft',
  limit: 5
});
```

---

### 6. `graphrag_get_neighbors`

Get all neighboring entities.

**Parameters:**
- `entity_id: string` - The entity identifier

**Returns:**
```json
{
  "neighbors": [/* GraphNode objects */]
}
```

**Example:**
```typescript
const neighbors = await invoke('graphrag_get_neighbors', {
  entityId: 'person_john_doe'
});
```

---

### 7. `graphrag_get_community`

Get all entities in a community.

**Parameters:**
- `community_id: number` - The community identifier

**Returns:**
```json
{
  "entities": [/* GraphNode objects */]
}
```

**Example:**
```typescript
const community = await invoke('graphrag_get_community', {
  communityId: 1
});
```

---

### 8. `graphrag_retrieve`

Perform graph-based retrieval.

**Parameters:**
- `query: string` - Search query

**Returns:**
```json
{
  "results": [
    {
      "entity": {/* GraphNode */},
      "relevance_score": 0.95,
      "retrieval_path": ["entity1", "entity2"],
      "context": []
    }
  ]
}
```

**Example:**
```typescript
const results = await invoke('graphrag_retrieve', {
  query: 'AI research projects'
});
```

---

### 9. `graphrag_find_path`

Find shortest path between two entities.

**Parameters:**
- `source_id: string` - Source entity ID
- `target_id: string` - Target entity ID

**Returns:**
```json
{
  "path": ["entity1", "entity2", "entity3"],
  "length": 2
}
```

**Example:**
```typescript
const path = await invoke('graphrag_find_path', {
  sourceId: 'person_alice',
  targetId: 'org_microsoft'
});
```

---

### 10. `graphrag_stats`

Get graph statistics.

**Parameters:** None

**Returns:**
```json
{
  "total_entities": 150,
  "total_relationships": 320,
  "total_communities": 12,
  "entity_types": {
    "Person": 45,
    "Organization": 30
  },
  "relationship_types": {
    "WorksWith": 80,
    "Uses": 60
  }
}
```

**Example:**
```typescript
const stats = await invoke('graphrag_stats');
```

---

### 11. `graphrag_delete_entity`

Delete an entity from the graph.

**Parameters:**
- `entity_id: string` - The entity identifier

**Returns:** `"Entity deleted successfully"`

**Example:**
```typescript
await invoke('graphrag_delete_entity', {
  entityId: 'person_old_user'
});
```

---

### 12. `graphrag_clear_all`

Clear the entire knowledge graph.

**Parameters:** None

**Returns:** `"Graph cleared successfully"`

**Example:**
```typescript
await invoke('graphrag_clear_all');
```

---

### 13. `graphrag_get_extractor_config`

Get entity extractor configuration.

**Parameters:** None

**Returns:**
```json
{
  "entity_types": ["Person", "Organization", ...],
  "relationship_types": ["WorksWith", "PartOf", ...]
}
```

**Example:**
```typescript
const config = await invoke('graphrag_get_extractor_config');
```

---

### 14. `graphrag_get_retrieval_config`

Get retrieval engine configuration.

**Parameters:** None

**Returns:**
```json
{
  "max_hops": 2,
  "max_results": 10,
  "enable_community_expansion": true
}
```

**Example:**
```typescript
const config = await invoke('graphrag_get_retrieval_config');
```

---

## ReAct Agent Commands (3 commands)

### 1. `react_execute`

Execute a ReAct reasoning loop.

**Parameters:**
- `query: string` - The task/query to solve

**Returns:**
```json
{
  "steps": [
    {
      "type": "Thought" | "Action" | "Observation" | "Answer",
      "content": "string"
    }
  ],
  "final_answer": "string" | null,
  "iterations_used": 3,
  "success": true,
  "error": null
}
```

**Example:**
```typescript
const result = await invoke('react_execute', {
  query: 'Search for information about quantum computing and summarize the key concepts'
});
```

---

### 2. `react_get_config`

Get ReAct agent configuration.

**Parameters:** None

**Returns:**
```json
{
  "max_iterations": 5,
  "model": "qwen2.5:7b",
  "temperature": 0.1,
  "enable_verbose": true
}
```

**Example:**
```typescript
const config = await invoke('react_get_config');
```

---

### 3. `react_set_config`

Update ReAct agent configuration.

**Parameters:**
- `max_iterations?: number` - Maximum reasoning iterations
- `model?: string` - LLM model to use
- `temperature?: number` - Sampling temperature
- `enable_verbose?: boolean` - Enable verbose logging

**Returns:** `"Configuration updated successfully"`

**Example:**
```typescript
await invoke('react_set_config', {
  maxIterations: 7,
  temperature: 0.2
});
```

---

## Plan-and-Solve Commands (12 commands)

### 1. `planner_generate`

Generate a plan for a goal.

**Parameters:**
- `goal: string` - The goal to plan for

**Returns:**
```json
{
  "id": "plan_1234567890",
  "goal": "string",
  "steps": [
    {
      "step_number": 1,
      "description": "string",
      "action": "string",
      "expected_output": "string",
      "depends_on": [],
      "status": "pending",
      "result": null,
      "error": null
    }
  ],
  "estimated_time": "10-15 minutes",
  "required_tools": ["web_search", "file_write"],
  "risks": ["Network connectivity may affect search results"],
  "created_at": 1234567890,
  "user_approved": false,
  "execution_started": false,
  "completed": false
}
```

**Example:**
```typescript
const plan = await invoke('planner_generate', {
  goal: 'Create a comprehensive market research report on electric vehicles'
});
```

---

### 2. `planner_approve`

Approve a plan for execution.

**Parameters:**
- `plan_json: string` - JSON stringified plan object

**Returns:** `"Plan approved successfully"`

**Example:**
```typescript
const planJson = JSON.stringify(plan);
await invoke('planner_approve', { planJson });
```

---

### 3. `planner_execute`

Execute an approved plan.

**Parameters:**
- `plan_id: string` - The plan identifier

**Returns:**
```json
{
  "plan_id": "plan_1234567890",
  "success": true,
  "completed_steps": 5,
  "failed_steps": 0,
  "skipped_steps": 0,
  "total_steps": 5,
  "execution_log": [
    "Step 1: Research market trends - IN PROGRESS",
    "Step 1: Research market trends - COMPLETED",
    ...
  ],
  "final_result": "Plan executed successfully",
  "error": null
}
```

**Example:**
```typescript
const execution = await invoke('planner_execute', {
  planId: 'plan_1234567890'
});
```

---

### 4. `planner_reject`

Reject/cancel a plan.

**Parameters:**
- `plan_id: string` - The plan identifier

**Returns:** `"Plan {id} rejected"`

**Example:**
```typescript
await invoke('planner_reject', {
  planId: 'plan_1234567890'
});
```

---

### 5. `planner_get_plan`

Get plan details by ID.

**Parameters:**
- `plan_id: string` - The plan identifier

**Returns:** Plan object (same structure as `planner_generate`)

**Example:**
```typescript
const plan = await invoke('planner_get_plan', {
  planId: 'plan_1234567890'
});
```

---

### 6. `planner_list_approved`

List all approved plans awaiting execution.

**Parameters:** None

**Returns:**
```json
{
  "plan_ids": ["plan_123", "plan_456"],
  "count": 2
}
```

**Example:**
```typescript
const approved = await invoke('planner_list_approved');
```

---

### 7. `planner_list_history`

List plan execution history.

**Parameters:**
- `limit?: number` - Maximum results (default: 10)

**Returns:**
```json
{
  "plans": [
    {
      "id": "plan_123",
      "goal": "string",
      "steps_count": 5,
      "completed": true,
      "progress": 100.0,
      "created_at": 1234567890
    }
  ],
  "count": number
}
```

**Example:**
```typescript
const history = await invoke('planner_list_history', {
  limit: 20
});
```

---

### 8. `planner_clear_history`

Clear plan execution history.

**Parameters:** None

**Returns:** `"Cleared {count} plans from history"`

**Example:**
```typescript
await invoke('planner_clear_history');
```

---

### 9. `planner_get_config`

Get planner configuration.

**Parameters:** None

**Returns:**
```json
{
  "model": "qwen2.5:7b",
  "temperature": 0.3,
  "max_steps": 10,
  "enable_auto_recovery": true,
  "max_retry_attempts": 2
}
```

**Example:**
```typescript
const config = await invoke('planner_get_config');
```

---

### 10. `planner_set_config`

Update planner configuration.

**Parameters:**
- `model?: string` - LLM model to use
- `temperature?: number` - Sampling temperature
- `max_steps?: number` - Maximum steps in a plan
- `enable_auto_recovery?: boolean` - Enable auto-recovery
- `max_retry_attempts?: number` - Max retry attempts for failed steps

**Returns:** `"Configuration updated successfully"`

**Example:**
```typescript
await invoke('planner_set_config', {
  maxSteps: 15,
  enableAutoRecovery: true
});
```

---

### 11. `planner_generate_and_execute`

Generate and execute plan in one call (for automation).

**Parameters:**
- `goal: string` - The goal to plan for
- `auto_approve: boolean` - Automatically approve the plan

**Returns:** PlanExecution object (same structure as `planner_execute`)

**Example:**
```typescript
const execution = await invoke('planner_generate_and_execute', {
  goal: 'Organize project files by category',
  autoApprove: true
});
```

---

### 12. `planner_stats`

Get planner statistics.

**Parameters:** None

**Returns:**
```json
{
  "total_plans": 25,
  "completed_plans": 20,
  "in_progress_plans": 2,
  "pending_approval": 3,
  "average_steps_per_plan": 6.4
}
```

**Example:**
```typescript
const stats = await invoke('planner_stats');
```

---

## Error Handling

All commands return errors in the format:

```typescript
try {
  const result = await invoke('command_name', params);
} catch (error) {
  // error is a string describing what went wrong
  console.error('Command failed:', error);
}
```

Common error types:
- `"Database lock error"` - Database is busy
- `"Failed to parse JSON"` - Invalid input format
- `"Ollama API call failed"` - LLM service unavailable
- `"Plan not found"` - Invalid plan ID
- `"Entity not found"` - Invalid entity ID

---

## TypeScript Types

```typescript
// GraphRAG Types
interface GraphEntity {
  entity_id: string;
  name: string;
  entity_type: string;
  properties: Record<string, any>;
  community_id?: number;
  degree: number;
}

interface GraphRetrievalResult {
  entity: GraphEntity;
  relevance_score: number;
  retrieval_path: string[];
  context: any[];
}

// ReAct Types
type ReActStepType = 'Thought' | 'Action' | 'Observation' | 'Answer';

interface ReActStep {
  type: ReActStepType;
  content: string;
}

interface ReActExecution {
  steps: ReActStep[];
  final_answer: string | null;
  iterations_used: number;
  success: boolean;
  error: string | null;
}

// Plan-and-Solve Types
type StepStatus = 'pending' | 'in_progress' | 'completed' | 'failed' | 'skipped';

interface PlanStep {
  step_number: number;
  description: string;
  action: string;
  expected_output: string;
  depends_on: number[];
  status: StepStatus;
  result?: string;
  error?: string;
}

interface Plan {
  id: string;
  goal: string;
  steps: PlanStep[];
  estimated_time: string;
  required_tools: string[];
  risks: string[];
  created_at: number;
  user_approved: boolean;
  execution_started: boolean;
  completed: boolean;
}

interface PlanExecution {
  plan_id: string;
  success: boolean;
  completed_steps: number;
  failed_steps: number;
  skipped_steps: number;
  total_steps: number;
  execution_log: string[];
  final_result?: string;
  error?: string;
}
```

---

**Version**: 3.7.0
**Last Updated**: November 2024
